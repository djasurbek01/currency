# Проект: Скрипт получения ЦБ-курсов валют

## Описание
Скрипт получает актуальные курсы валют с сайта [ЦБ РФ](http://www.cbr.ru/scripts/XML_daily.asp) и обновляет их ежедневно начиная с 07:00.

Функциональность:
- Получение и сохранение курсов валют в базу данных.
- Страница `/getcurrency` запускает процесс обновления курсов.
- Виджет на главной странице отображает текущие курсы валют с изменением относительно предыдущего дня.
- Автоматическое обновление курсов в виджете каждые 5 секунд.

## Технологии
- **Backend**: PHP 7.4, Laravel 8, MySQL
- **Frontend**: HTML, Bootstrap, JavaScript, AJAX

## Установка и запуск проекта

### 1. Клонирование репозитория
```sh
git clone https://github.com/djasurbek01/currency.git
cd currency
```

### 2. Установка зависимостей
```sh
composer install
npm install
```

### 3. Настройка окружения
Скопируйте `.env.example` в `.env`:
```sh
cp .env.example .env
```

Отредактируйте `.env`, установив параметры подключения к БД:
```sh
DB_CONNECTION=mysql
DB_HOST=127.0.0.1
DB_PORT=3306
DB_DATABASE=<имя_базы_данных>
DB_USERNAME=<пользователь>
DB_PASSWORD=<пароль>
```

### 4. Генерация ключа приложения
```sh
php artisan key:generate
```

### 5. Миграция базы данных
```sh
php artisan migrate
```

### 6. Запуск сервера
```sh
php artisan serve
```
Проект будет доступен по адресу: [http://127.0.0.1:8000](http://127.0.0.1:8000)

### 7. Запуск получения курсов валют
При первом запуске необходимо перейти на страницу:
```
http://127.0.0.1:8000/getcurrency
```
После этого виджет на главной странице будет автоматически обновлять курсы каждые 5 секунд.

## Автоматический запуск обновления курсов
Для автоматического обновления валют в 07:00 настройте cron:
```sh
crontab -e
```
Добавьте следующую строку:
```
0 7 * * * cd /путь/к/проекту && php artisan schedule:run >> /dev/null 2>&1
```

